dataset_type: service
target_dataset: service

title: Service Inventory
notes: >
  Access, upload and modify the Service Inventory of external and internal 
  enterprise services for your organization

template_version: 3
template_updated: 2024-07-23

portal_type: dataset
collection: service

resources:
# ====SERVICE INVENTORY====
- resource_name: service_inventory
  title: Service Identification Information & Metrics
  fields:
  
  - datastore_id: fiscal_yr
    label:
      en: Fiscal Year
      fr: Année financière
    description:
      en: Identifies the fiscal year for which service data is reported
      fr: >
        Indique l'exercice pour lequel les données sur les services sont 
        déclarées.
    datastore_type: year
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices_file: choices/fiscal_yr.yaml

  - datastore_id: service_id
    label:
      en: Service ID Number
      fr: Numéro d'identification du service
    description:
      en: >
        The unique number assigned to a service in the inventory to make it 
        easier to refer to specific services.
      fr: >
        Le numéro unique attribué à un service dans le répertoire afin de 
        faciliter le référencement à des services précis.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true

  - datastore_id: department_name_en
    label:
      en: Department Name (English)
      fr: Nom du ministère (en anglais)
    description:
      en: Identifies the applied title of the department or agency.
      fr: Identifie le titre d'usage du ministère ou de l'organisme
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_column_width: 28
    excel_required: true
    
  - datastore_id: department_name_fr
    label:
      en: Department Name (French)
      fr: Nom de ministère (en français)
    description:
      en: Identifies the applied title of the department or agency.
      fr: Identifie le titre d'usage du ministère ou de l'organisme
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    occurrence: Single
    validation: This field must not be empty
    excel_column_width: 28
    excel_required: true
    
  - datastore_id: service_name_en
    label:
      en: Service Name (English)
      fr: Nom du service (en anglais)
    description:
      en: Identifies the official name of the service.
      fr: Indique le nom officiel du service.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 100 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 100 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<100)'

  - datastore_id: service_name_fr
    label:
      en: Service Name (French)
      fr: Nom du service (en français)
    description:
      en: Identifies the official name of the service.
      fr: Indique le nom officiel du service.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 100 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 100 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<100)'

  - datastore_id: service_description_en
    label:
      en: Service Description (English)
      fr: Description du service (en anglais)
    description:
      en: Provides a brief description of the service, in plain language.
      fr: Offre une brève description du service, en langage simple.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 500 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 500 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<500)'

  - datastore_id: service_description_fr
    label:
      en: Service Description (French)
      fr: Description du service (en français)
    description:
      en: Provides a brief description of the service, in plain language.
      fr: Offre une brève description du service, en langage simple.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 500 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 500 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<500)'

  - datastore_id: service_type
    label:
      en: Service Type
      fr: Type de service
    description:
      en: >
        Identifies the service type as outlined in the Guideline on Service 
        and Digital.
      fr: > 
        Indique le type de service tel qu'indiqué dans la Ligne directrice sur 
        les services et le numérique.
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Multiple
    choices:
      apir:
        en: Agreements, Permissions, Inspections, Rulings
        fr: Accords, autorisations, inspections, décisions
      cer:
        en: Care, Education, Recreation
        fr: Soins, éducation, loisirs
      gnc:
        en: Grants and Contributions
        fr: Subventions et contributions
      info:
        en: Information
        fr: Informations
      lrp:
        en: Legislation, Regulation, Policy
        fr: Législation, réglementation, politique
      ppi:
        en: Penalities, Protection, Intervention
        fr: Pénalités, protection, interventions
      reg_vol:
        en: High Volume Regulatory Transactions
        fr: Opérations reglementaires à demande élevée
      res:
        en: Resources
        fr: Ressources

  - datastore_id: service_recipient_type
    label:
      en: Service Recipient Type
      fr: Type de bénéficiaire du service
    description: #GE: this description is bad
      en: >
        'Targeted, Client-based Services - Service specific clients or groups, 
        such as people, businesses, GC employees. 
        Untargeted, Societal-based Service -Serve society, not distinct 
        people or groups, such as military, pure science. Untargeted 
        services only fill in static data, they do not fill in the 
        service report.'
      fr: >
        'Services ciblés axés sur les clients - Répondent aux besoins de 
        clients ou de groupes particuliers, par exemple les personnes, 
        les entreprises ou les employés du GC. Services non ciblés axés 
        sur la société -Répondent aux besoins de la société en général 
        et non aux besoins de personnes ou de groupes distincts, par exemple 
        les militaires ou la science pure. Les données sur les services non 
        ciblés figurent uniquement dans les champs de données statiques et 
        ne figurent pas dans le rapport des services.'
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      client:
        en: Targeted, Client-based service
        fr: Service ciblé, axé sur les clients
      society:
        en: Untargeted, Societal-based service
        fr: Service non-ciblé, axé sur la société

  - datastore_id: service_scope
    label:
      en: External Service or Internal Enterprise Service
      fr: Service externe ou service intégré interne
    description: #GE: this description is bad and long
      en: Indicates whether the service is external or internal to government.
      fr: > #GE: translate this better
        Indique si le service est offert aux clients externes ou internes 
        au gouvernement 
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Multiple
    choices:
      cluster: #GE: what even is this
        en: Internal Cluster Service
        fr: Service cluster interne
      enterprise:
        en: Internal Enterprise Service
        fr: Service interne intégré
      extern:
        en: External Service
        fr: Service externe
      intern:
        en: Internal Service
        fr: Service interne

  - datastore_id: client_target_groups
    label:
      en: Client/Target Groups
      fr: Clients/groupes cibles
    description:
      en: Identifies the clients or target groups of the service.
      fr: Identifie les clients ou les groupes de services cibles.
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Multiple
    choices:
      econom:
        en: Economic Segments (Businesses)
        fr: Segments économiques (entreprises)
      for:
        en: Foreign Entities
        fr: Entités étrangères
      intern_gov:
        en: Internal to Government
        fr: Interne au gouvernement
      ngo:
        en: Non Profit Institutions and Organizations
        fr: Institutions et organismes sans but lucratif
      person:
        en: Persons
        fr: Particuliers
      ptc:
        en: Provinces, Territories or Communities
        fr: Provinces, territoires et collectivités

  - datastore_id: program_id_code
    label:
      en: Program ID Code
      fr: Code d'identification du programme
    description:
      en: >
        Identifies the unique program code associated with program elements 
        for all strategic outcomes, programs, sub-programs, and 
        sub-sub-programs. The Program codes in the government-wide Chart 
        of Accounts can be used. Corporate planners in the department/agency
        who are responsible for the Policy on Results can assist in 
        identifying this, if needed.
      fr: >
        Indique le code de programme unique associé aux éléments de programme 
        pour tous les résultats stratégiques, les programmes, les 
        sous-programmes et les sous-sous-programmes. Les planificateurs 
        ministériels du ministère ou de l'organisme responsables de la 
        Politique sur les résultats peuvent aider à déterminer le code 
        d'identification du programme, au besoin.
    datastore_type: text
    format_type: Free text #GE: can we define a mask, like postal code, to check validity, i.e. ABC00, otherwise we need to point to the code list from chart of accounts
    obligation: Optional
    occurrence: Single
    choices: # create from https://open.canada.ca/data/en/dataset/3c371e57-d487-49fa-bb0d-352ae8dd6e4e

  - datastore_id: program_name_en
    label:
      en: Program Name (English)
      fr: Désignation du programme (en anglais)
    description:
      en: >
        Identifies the name of the program under which the service is 
        delivered.
      fr: Indique le nom du programme sous lequel le service est offert.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single #GE: to confirm w team whether we allow multiple programs
    choices: # create from https://open.canada.ca/data/en/dataset/3c371e57-d487-49fa-bb0d-352ae8dd6e4e

  - datastore_id: program_name_fr
    label:
      en: Program Name (French)
      fr: Désignation du programme (en français)
    description:
      en: >
        Identifies the name of the program under which the service is 
        delivered.
      fr: Indique le nom du programme sous lequel le service est offert.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices: # create from https://open.canada.ca/data/en/dataset/3c371e57-d487-49fa-bb0d-352ae8dd6e4e

  - datastore_id: client_feedback
    label:
      en: Client Feedback, by Channel
      fr: Commentaires des clients, par canal
    description:
      en: >
        Identifies which channels, if any, provide users of a service an 
        opportunity to provide feedback on their level of satisfaction with 
        the service.
      fr: >
        Détermine quels canaux, s'il y a lieu, offrent aux utilisateurs 
        d'un service l'occasion de donner une rétroaction sur leur niveau de 
        satisfaction à l'égard du service.
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Multiple
    choices:
      eml:
        en: Email
        fr: Courriel
      fax:
        en: Fax
        fr: Télécopieur
      non:
        en: No feedback collected
        fr: Aucune rétroaction possible
      onl:
        en: Online
        fr: En ligne
      oth:
        en: Other channel not listed
        fr: Autre option qui n'est pas sur la liste
      person:
        en: In-Person
        fr: En personne
      post:
        en: Postal Mail
        fr: Courrier postal
      tel:
        en: Telephone
        fr: Téléphone

  - datastore_id: service_fee
    label:
      en: Service Fees
      fr: Frais de service
    description:
      en: >
        Identifies whether a service fee is collected for the provision 
        of the service.
      fr: >
        Indique si des frais de service sont perçus pour la prestation du 
        service.
    datastore_type: boolean
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      0:
        en: No
        fr: Non
      1:
        en: Yes
        fr: Oui

  - datastore_id: e_registration
    label:
      en: 'Online Services: Account Registration/Enrollment'
      fr: 'Services en ligne: Enregistrement/inscription du compte'
    description:
      en: > 
        Identifies whether a client can register or enroll for a personal 
        account where they can make use of other interaction points (applying
        for services, providing information, seeing their 
        status, submitting feedback, etc.).
      fr: >
        Indique si un client peut s'inscrire ou s'inscrire à un compte 
        personnel où il peut utiliser d'autres points d'interaction 
        (demander des services, fournir des renseignements, voir son statut, 
        soumettre des commentaires, etc.).
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (This interaction point is not applicable to the service)
        fr: S.O. (Ce point d'interaction ne s'applique pas au service)
      0:
        en: No (This interaction point is applicable to the service but is not currently online)
        fr: Non (Ce point d'interaction s'applique au service, mais il n'est pas de nature électronique présentement)
      1:
        en: Yes (This interaction point is applicable to the service and is online)
        fr: Oui (Ce point d'interaction s'applique au service et est de nature électronique)


  - datastore_id: e_authentication
    label:
      en: 'Online Services: Authentication'
      fr: 'Services en ligne: Authentification'
    description:
      en: 'Identifies whether a client can authenticate their identity online.'
      fr: Indique si un client peut confirmer son identité en ligne
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (This interaction point is not applicable to the service)
        fr: S.O. (Ce point d'interaction ne s'applique pas au service)
      0:
        en: No (This interaction point is applicable to the service but is not currently online)
        fr: Non (Ce point d'interaction s'applique au service, mais il n'est pas de nature électronique présentement)
      1:
        en: Yes (This interaction point is applicable to the service and is online)
        fr: Oui (Ce point d'interaction s'applique au service et est de nature électronique)

  - datastore_id: e_application
    label:
      en: 'Online Services: Application'
      fr: 'Services en ligne: Demande'
    description:
      en: Identifies whether a client can apply for a service online
      fr: Indique si un client peut présenter une demande de service en ligne
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (This interaction point is not applicable to the service)
        fr: S.O. (Ce point d'interaction ne s'applique pas au service)
      0:
        en: No (This interaction point is applicable to the service but is not currently online)
        fr: Non (Ce point d'interaction s'applique au service, mais il n'est pas de nature électronique présentement)
      1:
        en: Yes (This interaction point is applicable to the service and is online)
        fr: Oui (Ce point d'interaction s'applique au service et est de nature électronique)


  - datastore_id: e_decision
    label:
      en: 'Online Services: Decision'
      fr: 'Services en ligne: Décision'
    description:
      en: > 
        'Identifies whether a client can be notified online of the outcome of 
        their request for this service. '
      fr: > 
        'Indique si un client peut être informé en ligne du résultat de sa 
        demande de ce service. '
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (This interaction point is not applicable to the service)
        fr: S.O. (Ce point d'interaction ne s'applique pas au service)
      0:
        en: No (This interaction point is applicable to the service but is not currently online)
        fr: Non (Ce point d'interaction s'applique au service, mais il n'est pas de nature électronique présentement)
      1:
        en: Yes (This interaction point is applicable to the service and is online)
        fr: Oui (Ce point d'interaction s'applique au service et est de nature électronique)

  - datastore_id: e_issuance
    label:
      en: 'Online Services: Issuance'
      fr: 'Services en ligne: Émission'
    description:
      en: > 
        'Identifies whether a client can receive the service online, perhaps 
        in the form of permits, certificates, money or information.'
      fr: > 
        'Indique si un client peut recevoir le service en ligne, peut-être 
        sous forme de permis, de certificats, d'argent ou d'information.'
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (This interaction point is not applicable to the service)
        fr: S.O. (Ce point d'interaction ne s'applique pas au service)
      0:
        en: No (This interaction point is applicable to the service but is not currently online)
        fr: Non (Ce point d'interaction s'applique au service, mais il n'est pas de nature électronique présentement)
      1:
        en: Yes (This interaction point is applicable to the service and is online)
        fr: Oui (Ce point d'interaction s'applique au service et est de nature électronique)

  - datastore_id: e_feedback
    label:
      en: 'Online Services: Issue Resolution and Feedback'
      fr: 'Services en ligne: Solution de problème et rétroaction'
    description:
      en: >
        Identifies whether a client can seek resolution to their issues or 
        provide feedback online
      fr: > 
        Indique si un client peut demander une résolution à leur problèmes 
        avec le service ou fournir de la rétroaction en ligne.
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (This interaction point is not applicable to the service)
        fr: S.O. (Ce point d'interaction ne s'applique pas au service)
      0:
        en: No (This interaction point is applicable to the service but is not currently online)
        fr: Non (Ce point d'interaction s'applique au service, mais il n'est pas de nature électronique présentement)
      1:
        en: Yes (This interaction point is applicable to the service and is online)
        fr: Oui (Ce point d'interaction s'applique au service et est de nature électronique)

  - datastore_id: online_comments_en
    label:
      en: Comments on Online Services - Client Interaction Points (English)
      fr: >
        Commentaires sur les services électroniques - points d'interaction avec
        les clients (anglais)
    description:
      en: >
        Comments related to online services - client Interaction points 
        (English). For any interaction points reported as "Not Applicable", 
        comments have to be provided.
      fr: > 
        Commentaires en lien avec les services électroniques - points 
        d'interaction avec les clients (anglais). Pour tout points 
        d'interaction signalés comme « sans objet », des commentaires doivent 
        être fournis.
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: online_comments_fr
    label:
      en: Comments on Online Services - Client Interaction Points (French)
      fr: > 
        Commentaires sur les services électroniques - points d'interaction 
        avec les clients (français)
    description:
      en: >
        Comments related to online services - client Interaction points 
        (French). For any interaction points reported as "Not Applicable", 
        comments have to be provided.
      fr: > 
        Commentaires en lien avec les services électroniques - points 
        d'interaction avec les clients (français). Pour tout points 
        d'interaction signalés comme « sans objet », des commentaires doivent 
        être fournis.
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: last_year_of_service_review
    label:
      en: Year of last service review
      fr: Année du dernier examen de service
    description:
      en: > 
        Identifies the fiscal year when the most recent service review was 
        completed.
      fr: > 
        Identifie l'exercice lors duquel le plus récent examen de service a 
        été mené
    datastore_type: year #GE: no format type?
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices_file: choices/fiscal_year.yaml

    datastore_id: last_year_of_service_improvement_based_on_client_feedback
    label:
      en: Year of last service improvement based on client feedback
      fr: > 
        Année de la dernière amélioration du service sur la base de la 
        rétroaction du client
    description:
      en: > 
        'What was the most recent year in which this service was improved 
        based on client feedback?'
      fr: > 
        'Quelle a été l'année la plus récente au cours de laquelle ce service 
        a été amélioré en fonction des commentaires des clients?'
    datastore_type: year #GE: no format type?
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices_file: choices/fiscal_year.yaml

  - datastore_id: use_of_CRA_number
    label:
      en: Use of CRA Business Number
      fr: Utilisation du numéro d'entreprise de l'ARC
    description:
      en: > 
        Identifies whether the Canada Revenue Agency's Business Number is 
        used in the delivery of the service if the service is delivered to a 
        business.
      fr: > 
        Identifie si le numéro d'entreprise de l'Agence du Revenu du Canada 
        est utilisé dans la prestation du service si le service est livré à 
        une entreprise.
    datastore_type: numeric
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: false
    occurrence: Single
    choices:
      -1:
        en: N/A (not a service to businesses)
        fr: S.O. (N'est pas un service aux entreprises)
      0:
        en: No
        fr: Non
      1:
        en: Yes
        fr: Oui

    datastore_id: use_of_SIN_number
    label:
      en: Use of Social Insurance Number
      fr: Utilisation du numéro d'assurance sociale (NAS)
    description:
      en: > 
        Identifies whether the Social Insurance Number (SIN) is used in the 
        delivery of the service.
      fr: > 
        Indique si le numéro d'assurance sociale (NAS) est utilisé dans la 
        prestation du service.
    datastore_type: numeric
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_full_text_choices: true
    excel_required: true
    occurrence: Single
    choices:
      -1:
        en: N/A (not a service to businesses)
        fr: S.O. (N'est pas un service aux entreprises)
      0:
        en: false
        fr: Non
      1:
        en: true
        fr: Oui

  - datastore_id: calls_received
    label:
      en: Number of Telephone Enquiries Received
      fr: Nombre des demandes téléphoniques reçus
    description:
      en: > 
        Identifies the number of enquiries about the service received in this 
        fiscal year. Note: This field represents only requests for information 
        about the service. Report service requests or applications submitted 
        by telephone in the "telephone applications" field
      fr: > 
        Indique le nombre de demandes d'information reçues par téléphone au 
        cours d'un exercice financier. Remarque : Ce champ indique seulement 
        le nombre de demandes d'information au sujet d'un service. Servez-vous 
        du champ "telephone applications" pour les demandes de prestation de 
        service reçues par téléphone.
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: telephone_applications
    label:
      en: Number of Applications Submitted by Telephone
      fr: Nombre de demandes soumises par téléphone
    description:
      en: > 
        Identifies the number of applications submitted in a fiscal year for 
        the telephone channel.
      fr: > 
        Indique le nombre de demandes reçues par téléphone au cours d'un 
        exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: web_visits
      label:
      en: Number of Website Visits
      fr: Nombre de visites sur le site Web
    description:
      en: > 
        Identifies the number of visits to the service's website in a fiscal 
        year
      fr: > 
        Indique le nombre de de visites au site web du service lors d'un 
        exercice financier
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: online_applications
    label:
      en: Number of Applications Submitted Online
      fr: Nombre de demandes soumises en ligne
    description:
      en: > 
        Identifies the number of applications submitted in a fiscal year for 
        the online channel
      fr: Indique le nombre de demandes reçues en ligne au cours d'un exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: >
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: in_person_applications
    label:
      en: Number of Applications Submitted In-Person
      fr: Nombre de demandes soumises en personne
    description:
      en: > 
        Identifies number of applications received in-person in a fiscal year 
        for the service
      fr: > 
        Indique le nombre de demandes reçues en personne au cours d'un exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: postal_mail_applications
    label:
      en: Number of Applications Submitted via Postal Mail
      fr: Nombre de demandes soumises par la poste
    description:
      en: > 
        Identifies the number of applications received through postal mail in 
        a fiscal year for the service
      fr: > 
      Indique le nombre de demandes reçues par la poste au cours d'un exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: email_applications
    label:
      en: Number of Applications Submitted by Email
      fr: Nombre de demandes soumises par courriel
    description:
      en: > 
        Identifies the number of applications received through email in a 
        fiscal year for the service
      fr: > 
        Indique le nombre de demandes reçues par courriel au cours d'un 
        exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: fax_applications
    label:
      en: Number of Applications Submitted by Fax
      fr: Nombre de demandes soumises par fax
    description:
      en: > 
        Identifies the number of applications received through fax in a 
        fiscal year for the service
      fr: > 
        Indique le nombre de demandes reçues par télécopieur au cours d'un
        exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: other_applications
    label:
      en: Number of Applications Submitted via other channels
      fr: Nombre de demandes soumises par les autre modes de prestations
    description:
      en: > 
        Identifies the number of applications received through other 
        channels not listed in a fiscal year for the service
      fr: > 
        Indique le nombre de demandes reçues par des modes de prestations qui 
        ne sont pas énumérés dans ce gabarit au cours d'un exercice
    datastore_type: int #GE: if these can be NA or ND, I think these need to be text
    format_type: Numeric, NA or ND
    obligation: Mandatory
    validation: This field must not be empty
    excel_error_formula: > 
    AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true

  - datastore_id: special_remarks_en
    label:
      en: Special Remarks (English)
      fr: Remarques spéciales (anglais)
    description:
      en: > 
        Provides additional space for comments related to volumetrics 
        information. Please refer to associated Field ID, where applicable. 
        For comments related to other fields, departments can create and 
        publish an explanatory note on their website with a link to the GC 
        Service Inventory dataset.
      fr: > 
        Fournit de l'espace supplémentaire pour les commentaires relatifs 
        aux renseignements sur les volumes. Veuillez vous reporter au code 
        d'identification de la zone, s'il y a lieu. Pour les commentaires 
        relatifs à d'autres zones, les ministères peuvent publier une note 
        explicative sur leur site Web suivi d'un lien vers l'ensemble de 
        données du Répertoire des services du GC.
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: special_remarks_fr
    label:
      en: Special Remarks (French)
      fr: Remarques spéciales (français)
    description:
      en: > 
        Provides additional space for comments related to volumetrics 
        information. Please refer to associated Field ID, where applicable. 
        For comments related to other fields, departments can create and 
        publish an explanatory note on their website with a link to the GC 
        Service Inventory dataset.
      fr: > 
        Fournit de l'espace supplémentaire pour les commentaires relatifs 
        aux renseignements sur les volumes. Veuillez vous reporter au code 
        d'identification de la zone, s'il y a lieu. Pour les commentaires 
        relatifs à d'autres zones, les ministères peuvent publier une note 
        explicative sur leur site Web suivi d'un lien vers l'ensemble de 
        données du Répertoire des services du GC.
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: service_url_en
    label:
      en: URL to Service (English)
      fr: URL du service (anglais)
    description:
      en: > 
        Identifies the departmental webpage where the service is described 
        and/or accessed.
      fr: > 
        Indique la page Web du ministère où le service est décrit et/ou peut 
        être lancé.
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: service_url_fr
    label:
      en: URL to Service (French)
      fr: URL du service (français)
    description:
      en: > 
        Identifies the departmental webpage where the service is described 
        and/or accessed.
      fr: > 
        Indique la page Web du ministère où le service est décrit et/ou peut 
        être lancé.
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: total_applications #GE: this is a calculated field, we should probably not include it as input
    datastore_type: int
    description:
      en: > 
        Identifies the total number of applications submitted in a fiscal year 
        for all application channels.
      fr: >
      Indique le nombre total de demandes reçues au cours d'un exercice 
      pour tous les modes de prestation
    excel_error_formula: > 
      AND(NOT(ISNUMBER(VALUE({cell}))),{cell}<>"NA",{cell}<>"ND")
    excel_required: true
    format_type: Numeric, NA or ND
    label:
      en: Total Number of Applications
      fr: Nombre total de demandes soumises
    obligation: Optional
    occurrence: Single
    validation: This field must not be empty

  - datastore_id: record_created
    label: Record Creation Time
    datastore_type: timestamp
    import_template_include: false
    visible_to_public: false
    preview_class: bg-info

  - datastore_id: record_modified
    label: Last Record Modification Time
    datastore_type: timestamp
    import_template_include: false
    visible_to_public: false
    preview_class: bg-info

  - datastore_id: user_modified
    label: User Last Modified Record
    datastore_type: text
    import_template_include: false
    visible_to_public: false
    preview_class: bg-info
  
  triggers:
  - service_trigger: |
      DECLARE
        errors text[][] := '{{}}';
        crval RECORD;
      BEGIN
        errors := errors || required_error(NEW.fiscal_yr, 'fiscal_yr');
        errors := errors || choice_error(NEW.fiscal_yr, {fiscal_yr}, 'fiscal_yr');
        errors := errors || required_error(NEW.service_id, 'service_id');
        errors := errors || no_surrounding_whitespace_error(NEW.service_id, 'service_id');
        errors := errors || required_error(NEW.service_name_en, 'service_name_en');
        errors := errors || required_error(NEW.service_name_fr, 'service_name_fr');
        errors := errors || required_error(NEW.external_internal, 'external_internal');
        errors := errors || choice_error(NEW.external_internal, {external_internal}, 'external_internal');
        errors := errors || required_error(NEW.service_type, 'service_type');
        errors := errors || choice_error(NEW.service_type, {service_type}, 'service_type');
        errors := errors || required_error(NEW.special_designations, 'special_designations');
        errors := errors || choice_error(NEW.special_designations, {special_designations}, 'special_designations');
        errors := errors || required_error(NEW.service_description_en, 'service_description_en');
        errors := errors || required_error(NEW.service_description_fr, 'service_description_fr');
        errors := errors || required_error(NEW.authority_en, 'authority_en');
        errors := errors || required_error(NEW.authority_fr, 'authority_fr');
        errors := errors || required_error(NEW.program_name_en, 'program_name_en');
        errors := errors || required_error(NEW.program_name_fr, 'program_name_fr');
        errors := errors || required_error(NEW.program_id_code, 'program_id_code');
        errors := errors || required_error(NEW.client_target_groups, 'client_target_groups');
        NEW.client_target_groups := choices_from(
          NEW.client_target_groups, {client_target_groups}, 'client_target_groups');
        errors := errors || required_error(NEW.cra_business_number, 'cra_business_number');
        errors := errors || required_error(NEW.service_fee, 'service_fee');
        errors := errors || choice_error(NEW.service_fee, {service_fee}, 'service_fee');
        errors := errors || choice_error(NEW.cra_business_number, {cra_business_number}, 'cra_business_number');
        errors := errors || required_error(NEW.online_applications, 'online_applications');
        errors := errors || integer_or_na_nd_error(NEW.online_applications, 'online_applications');
        errors := errors || required_error(NEW.calls_received, 'calls_received');
        errors := errors || integer_or_na_nd_error(NEW.calls_received, 'calls_received');
        errors := errors || required_error(NEW.in_person_applications, 'in_person_applications');
        errors := errors || integer_or_na_nd_error(NEW.in_person_applications, 'in_person_applications');
        errors := errors || required_error(NEW.postal_mail_applications, 'postal_mail_applications');
        errors := errors || integer_or_na_nd_error(NEW.postal_mail_applications, 'postal_mail_applications');
        errors := errors || required_error(NEW.e_registration, 'e_registration');
        errors := errors || choice_error(NEW.e_registration, {e_registration}, 'e_registration');
        errors := errors || required_error(NEW.e_authentication, 'e_authentication');
        errors := errors || choice_error(NEW.e_authentication, {e_authentication}, 'e_authentication');
        errors := errors || required_error(NEW.e_application, 'e_application');
        errors := errors || choice_error(NEW.e_application, {e_application}, 'e_application');
        errors := errors || required_error(NEW.e_decision, 'e_decision');
        errors := errors || choice_error(NEW.e_decision, {e_decision}, 'e_decision');
        errors := errors || required_error(NEW.e_issuance, 'e_issuance');
        errors := errors || choice_error(NEW.e_issuance, {e_issuance}, 'e_issuance');
        errors := errors || required_error(NEW.e_feedback, 'e_feedback');
        errors := errors || choice_error(NEW.e_feedback, {e_feedback}, 'e_feedback');

        IF NEW.fiscal_yr <> '2016-2017' THEN
          errors := errors || required_error(NEW.service_url_en, 'service_url_en');
          errors := errors || required_error(NEW.service_url_fr, 'service_url_fr');
          errors := errors || required_error(NEW.use_of_sin, 'use_of_sin');
          errors := errors || choice_error(NEW.use_of_sin, {use_of_sin}, 'use_of_sin');
          errors := errors || required_error(NEW.web_visits_info_service, 'web_visits_info_service');
          errors := errors || integer_or_na_nd_error(NEW.web_visits_info_service, 'web_visits_info_service');
          errors := errors || required_error(NEW.email_applications, 'email_applications');
          errors := errors || integer_or_na_nd_error(NEW.email_applications, 'email_applications');
          errors := errors || required_error(NEW.fax_applications, 'fax_applications');
          errors := errors || integer_or_na_nd_error(NEW.fax_applications, 'fax_applications');
          errors := errors || required_error(NEW.client_feedback, 'client_feedback');
          NEW.client_feedback := choices_from(
            NEW.client_feedback, {client_feedback}, 'client_feedback');
        END IF;
        IF errors = '{{}}' THEN
          RETURN NEW;
        END IF;
        RAISE EXCEPTION E'TAB-DELIMITED\t%', array_to_string(errors, E'\t');
      END;
  - update_record_modified_created_trigger

 
# ====SERVICE STANDARDS====
- resource_name: service_standards
  title: Service Standards & Performance Results
  fields:

  - datastore_id: fiscal_yr
    label:
      en: Fiscal Year
      fr: Année financière
    description:
      en: Identifies the fiscal year for which service data is reported
      fr: > 
        Indique l'exercice pour lequel les données sur les services sont 
        déclarées.
    datastore_type: year
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices_file: choices/fiscal_yr.yaml

  - datastore_id: service_id
    label:
      en: Service ID Number
      fr: Numéro d'identification du service
    description:
      en: > 
        The unique number assigned to a service in the inventory to make it 
        easier to refer to specific services.
      fr: > 
        Le numéro unique attribué à un service dans le répertoire afin de 
        faciliter le référencement à des services précis.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    
  - datastore_id: service_name_en
    label:
      en: Service Name (English)
      fr: Nom du service (en anglais)
    description:
      en: Identifies the official name of the service.
      fr: Indique le nom officiel du service.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 100 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 100 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<100)'

  - datastore_id: service_name_fr
    label:
      en: Service Name (French)
      fr: Nom du service (en français)
    description:
      en: Identifies the official name of the service.
      fr: Indique le nom officiel du service.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 100 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 100 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<100)'

  - datastore_id: service_std_id
    label:
      en: Service Standard ID
      fr: Numéro d'identification de la norme relative aux services
    description:
      en: > 
        Identifies the unique number assigned to each service standard 
        for that service. Makes it easier for reference purposes as one 
        service may have multiple standards.
      fr: > 
        Indique le numéro unique attribué à chaque norme relative aux services 
        pour ce service. Facilite le référencement, car un service peut avoir 
        de multiples normes.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    
  - datastore_id: service_std_en
    label:
      en: Service Standard (English)
      fr: Norme relative aux services (anglais)
    description:
      en: > 
        Identifies the service standard related to a particular service. See 
        Guideline on Service and Digital for format to be used when 
        defining service standards.
      fr: > 
        Indique la norme relative aux services ayant trait à un service en 
        particulier. Voir la Ligne directrice sur les services et le numérique 
        afin de connaître le format à utiliser pour définir les normes 
        relatives aux services.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 100 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 100 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<100)'

  - datastore_id: service_std_fr
    label:
      en: Service Standard (French)
      fr: Norme relative aux services (français)
    description:
      en: >
        Identifies the service standard related to a particular service. See 
        Guideline on Service and Digital for format to be used when defining 
        service standards.
      fr: > 
        Indique la norme relative aux services ayant trait à un service en 
        particulier. Voir la Ligne directrice sur les services et le numérique 
        afin de connaître le format à utiliser pour définir les normes 
        relatives aux services.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation:
      en: This field must not be empty and max 100 characters.
      fr: Cette cellule est obligatoire et ne doit pas excéder 100 caractères.
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<100)'

  - datastore_id: service_std_type
    label:
      en: Service Standard Type
      fr: Type de norme relative aux services
    description:
      en: > 
        'Identifies the type of service standard as defined in the Guideline 
        on Service and Digital. Access: a commitment outlining the ease and 
        convenience the client should experience when attempting to access a 
        service. Accuracy: a commitment stipulating that the client will 
        receive a service that is up to date, free of errors, and complete. 
        Timeliness: a commitment stating how long the client should expect to 
        wait to receive a service once the service has been accessed.'
      fr: >
        "Indique le type de norme relative aux services défini dans la Ligne 
        directrice sur les services et le numérique. Accès à l'information: un 
        engagement qui décrit la facilité et la convivialité que devrait 
        connaître le client lorsqu'il essaie d'accéder à un service.  
        Exactitude: un engagement qui stipule que le client recevra un service 
        complet et à jour qui est exempt d'erreurs. Temps opportun:un 
        engagement qui indique le temps d'attente que devrait connaître le 
        client pour recevoir un service une fois qu'il y a accédé."
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices:
      ACS:
        en: Access
        fr: Accès
      ACY:
        en: Accuracy
        fr: Exactitude
      OTH:
        en: Other
        fr: Autre
      TML:
        en: Timeliness
        fr: Délai

  - datastore_id: channel
    label:
      en: Service Standard Channel
      fr: Mode de prestation de la norme de service
    description:
      en: Identifies the service channel to which the service standard applies
      fr: > 
        Identifie à quelle mode de prestation de service la norme de service
        s'applique
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices:
      eml:
        en: Email
        fr: Courriel
      fax:
        en: Fax
        fr: Télécopieur
      onl:
        en: Online
        fr: En ligne
      oth:
        en: Other
        fr: Autre
      person:
        en: In-person
        fr: En personne
      post:
        en: Postal mail
        fr: Courrier postal
      tel:
        en: Telephone
        fr: Téléphone

  - datastore_id: standard_channel_comment_en
    label:
      en: Comments on the service standard channel (English)
      fr: > 
        Commentaires sur le mode de prestation de la norme de service 
        (anglais)
    description:
      en: > 
        Comments related to the service standard channel and provides 
        explanation of "Other" channel selection.
      fr: >
        Commentaires en lien au mode de prestation de la norme de service et 
        fournit une explication de la sélection des modes de prestation 
        « Autre ».
    datastore_type: text
    format_type: Free text
    obligation: Optional
    validation:
      en: This field can be empty or up to max 500 characters.
      fr: > 
        Ce champ peut être vide ou contenir un maximum de 500 caractères.
    excel_error_formula: 'OR({default_formula},ISBLANK({cell}),{cell}<500)'

  - datastore_id: standard_channel_comment_fr
    label:
      en: Comments on the service standard channel (French)
      fr: > 
        Commentaires sur le mode de prestation de la norme de service 
        (Francais)
    description:
      en: > 
        Comments related to the service standard channel and provides 
        explanation of "Other" channel  selection.
      fr: > 
        Commentaires en lien au mode de prestation de la norme de service et 
        fournit une explication de la sélection des modes de prestation 
        « Autre ».
    datastore_type: text
    format_type: Free text
    obligation: Optional
    validation:
      en: This field can be empty or up to max 500 characters.
      fr: > 
        Ce formulaire peut être vide ou contenir un maximum de 500 
        caractères.
    excel_error_formula: 'OR({default_formula},ISBLANK({cell}),{cell}<500)'

  - datastore_id: target_type
    label:
      en: Target Type
      fr: Type de cible
    description:
      en: Identifies the type of service standard target.
      fr: Identifie le type de cible de la norme de service.
    datastore_type: text
    format_type: Controlled List
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    occurrence: Single
    choices:
      other_type:
        en: Other type of target
        fr: Autre type de cible
      percentage:
        en: Percentage of outcomes
        fr: Pourcentage des résultats

  - datastore_id: service_std_target
    label:
      en: Service Standard Target
      fr: Cible de la norme relative aux services
    description:
      en: > 
        The frequency that the organization expects to meet service standard 
        (reported as a percentage).
      fr: > 
        Fréquence à laquelle l'organisation s'attend à respecter sa norme de 
        service (exprimée en pourcentage).
    datastore_type: numeric
    format_type: Decimal
    obligation: Optional
    validation:
      en: This value must be between 0 and 1
      fr: This value must be between 0 and 1
    excel_error_formula: OR({default_formula},{cell}<0,{cell}>1)
    

  - datastore_id: volume_meeting_target
    label:
      en: Business Volume That Met Service Standard Target
      fr: > 
        Volume d'activités qui respectent la cible de la norme relative aux 
        services
    description:
      en: > 
        Identifies the number of final outputs issued appropriate to the 
        service (eg. payments issued, requests completed, etc) during the 
        fiscal year that met a particular service standard target for a 
        service.
      fr: > 
        Indique le nombre d'opérations de service effectuées (p. ex. les 
        appels auxquels on a répondu, les paiements émis, les demandes 
        traitées, etc.) au cours de l'exercice qui ont respecté une norme 
        relative aux services particulière à un service.
    datastore_type: numeric
    format_type: Numeric or ND
    obligation: Optional
    validation:
      en: This value must not be negative
      fr: Cette valeur ne doit pas être négatif
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<0)'
    
  - datastore_id: total_volume
    label:
      en: Total Volume
      fr: Volumes totaux
    description:
      en: > 
        Identifies the total number of final outputs issued appropriate to 
        the service (eg. payments issued, requests completed, etc) during the 
        fiscal year. Blank indicates no information available, while 0 
        indicates no final outputs issued.
      fr: >
        'Indique le nombre total d'opérations de service effectuées (p. ex. 
        les paiements émis, les demandes traitées, etc.) relativement à un 
        service au cours de l'exercice. Un champ vide indique qu''aucune 
        information n''est disponible, tandis que 0 indique qu''aucune 
        opération n'a été effectuée. '
    datastore_type: numeric
    format_type: Numeric or ND
    obligation: Optional
    validation:
      en: This value must not be negative
      fr: Cette valeur ne doit pas être négatif
    excel_required: true
    excel_error_formula: 'OR({default_formula},{cell}<0)'
    
  - datastore_id: performance #GE: this is a calculated field. we probably shouldn't collect it
    label:
      en: Performance
      fr: Performance
    description:
      en: > 
        Identifies the result achieved for this service standard. This is the 
        volume_meeting_target divided by the total_volume
      fr: > 
        Identifie les résultats atteints pour cette norme de service. Il s'agit
        du volume_meeting_target divisé par le total_volume
    datastore_type: numeric
    format_type: Numeric or ND
    obligation: Optional
    validation: This field must not be empty
    excel_required: true
    
  - datastore_id: standard_comment_en
    label:
      en: Comments on the service standard in general (English)
      fr: Commentaires sur la norme de service en general (anglais)
    description:
      en: Comments related to the service standard in general
      fr: Commentaires en lien à la norme de service en general
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: standard_comment_fr
    label:
      en: Comments on the service standard in general (French)
      fr: Commentaires sur la norme de service en general (Francais)
    description:
      en: Comments related to the service standard in general
      fr: Commentaires en lien à la norme de service en general
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: target_met
    label:
      en: Was the target met
      fr: La cible était-elle atteinte
    description:
      en: > 
        'A yes, no or not applicable field that is automatically calculated for
        target_type "Percentage of outcomes", where "Not applicable" is 
        autopopulated when field total_volume is reported as 0. Otherwise the 
        result is self-reported by departments for target_type "Other type of 
        target".'
      fr: > 
        'Un champ oui, non ou sans objet calculé automatiquement pour 
        target_type « Pourcentage de résultats », où « Sans objet » est rempli 
        automatiquement lorsque le champ total_volume est 0. Dans le cas 
        contraire, le résultat est autodéclaré par les ministères pour 
        target_type « Autre type de cible ». '
    datastore_type: text
    format_type: Free text
    obligation: Optional

  - datastore_id: service_std_url_en
    label:
      en: URL to Service Standards and Targets (English)
      fr: URL vers les normes relatives aux services et les cibles (anglais)
    description:
      en: > 
        Identifies the departmental webpage (Canada.ca) where the service 
        standards and targets are published.
      fr: > 
        Indique la page Web ministérielle (Canada.ca) où les normes relatives 
        aux services et les cibles sont publiées.
    datastore_type: text
    format_type: Free text
    obligation: Optional
    validation: This field must not be empty
    excel_required: true
    
  - datastore_id: service_std_url_fr
    label:
      en: URL to Service Standards and Targets (French)
      fr: URL vers les normes relatives aux services et les cibles (français)
    description:
      en: > 
        Identifies the departmental webpage (Canada.ca) where the service 
        standards and targets are published.
      fr: > 
        Indique la page Web ministérielle (Canada.ca) où les normes relatives 
        aux services et les cibles sont publiées.
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_required: true
    
  - datastore_id: realtime_result_url_en
    datastore_type: text
    label:
      en: URL to Real-Time Performance Results (English)
      fr: URL aux résultats de rendement en temps réel (anglais)
    description:
      en: > 
        Identifies the departmental webpage where the real-time performance 
        results for a service are published.
      fr: > 
        Identifie la site Web du service sur laquelle les résultats de 
        performance en temps réel d'un service sont publiés
    excel_required: true
    format_type: Free text
    obligation: Mandatory
    occurrence: Single
    validation: This field must not be empty

  - datastore_id: realtime_result_url_fr
    label:
      en: URL to Real-Time Performance Results (French)
      fr: URL aux résultats de rendement en temps réel (français)
    description:
      en: > 
        Identifies the departmental webpage where the real-time performance 
        results for a service are published.
      fr: > 
        Identifie la site Web du service sur laquelle les résultats de 
        performance en temps réel d'un service sont publiés
    format_type: Free text
    datastore_type: text
    obligation: Optional

  - datastore_id: department_name_en
    label:
      en: Department Name (English)
      fr: Nom du ministère (en anglais)
    description:
      en: Identifies the applied title of the department or agency.
      fr: Identifie le titre d'usage du ministère ou de l'organisme
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_column_width: 28
    excel_required: true
    
  - datastore_id: department_name_fr
    label:
      en: Department Name (French)
      fr: Nom de ministère (en français)
    description:
      en: Identifies the applied title of the department or agency.
      fr: Identifie le titre d'usage du ministère ou de l'organisme
    datastore_type: text
    format_type: Free text
    obligation: Mandatory
    validation: This field must not be empty
    excel_column_width: 28
    excel_required: true
    
  - datastore_id: record_created
    label: Record Creation Time
    import_template_include: false
    visible_to_public: false
    datastore_type: timestamp
    preview_class: bg-info

  - datastore_id: record_modified
    label: Last Record Modification Time
    import_template_include: false
    visible_to_public: false
    datastore_type: timestamp
    preview_class: bg-info

  - datastore_id: user_modified
    label: User Last Modified Record
    import_template_include: false
    visible_to_public: false
    datastore_type: text
    preview_class: bg-info


  datastore_primary_key: [fiscal_yr, service_id, service_std_id]
  datastore_indexes: ""

  default_preview_sort: fiscal_yr, service_id, service_std_id


  triggers:
  - service_std_trigger: |
      DECLARE
        errors text[][] := '{{}}';
        crval RECORD;
      BEGIN
        errors := errors || required_error(NEW.fiscal_yr, 'fiscal_yr');
        errors := errors || choice_error(NEW.fiscal_yr, {fiscal_yr}, 'fiscal_yr');
        errors := errors || required_error(NEW.service_id, 'service_id');
        errors := errors || no_surrounding_whitespace_error(NEW.service_id, 'service_id');
        errors := errors || required_error(NEW.service_std_id, 'service_std_id');
        errors := errors || no_surrounding_whitespace_error(NEW.service_std_id, 'service_std_id');
        errors := errors || required_error(NEW.service_std_en, 'service_std_en');
        errors := errors || required_error(NEW.service_std_fr, 'service_std_fr');
        errors := errors || required_error(NEW.service_std_url_en, 'service_std_url_en');
        errors := errors || required_error(NEW.service_std_url_fr, 'service_std_url_fr');
        NEW.service_std_type := choices_from(
          NEW.service_std_type, {service_std_type}, 'service_std_type');
        IF NEW.service_std_target < 0 OR NEW.service_std_target > 1 THEN
          RAISE EXCEPTION {service_std_target_error}, 'service_std_target';
        END IF;
        errors := errors || required_error(NEW.gcss_tool_fiscal_yr, 'gcss_tool_fiscal_yr');
        errors := errors || choice_error(NEW.gcss_tool_fiscal_yr, {gcss_tool_fiscal_yr}, 'gcss_tool_fiscal_yr');
        errors := errors || required_error(NEW.realtime_result_url_en, 'realtime_result_url_en');
        errors := errors || required_error(NEW.realtime_result_url_fr, 'realtime_result_url_fr');
        errors := errors || required_error(NEW.q1_performance_result, 'q1_performance_result');
        errors := errors || integer_or_na_nd_error(NEW.q1_performance_result, 'q1_performance_result');
        errors := errors || required_error(NEW.q1_business_volume, 'q1_business_volume');
        errors := errors || integer_or_na_nd_error(NEW.q1_business_volume, 'q1_business_volume');
        errors := errors || required_error(NEW.q2_performance_result, 'q2_performance_result');
        errors := errors || integer_or_na_nd_error(NEW.q2_performance_result, 'q2_performance_result');
        errors := errors || required_error(NEW.q2_business_volume, 'q2_business_volume');
        errors := errors || integer_or_na_nd_error(NEW.q2_business_volume, 'q2_business_volume');
        errors := errors || required_error(NEW.q3_performance_result, 'q3_performance_result');
        errors := errors || integer_or_na_nd_error(NEW.q3_performance_result, 'q3_performance_result');
        errors := errors || required_error(NEW.q3_business_volume, 'q3_business_volume');
        errors := errors || integer_or_na_nd_error(NEW.q3_business_volume, 'q3_business_volume');
        errors := errors || required_error(NEW.q4_performance_result, 'q4_performance_result');
        errors := errors || integer_or_na_nd_error(NEW.q4_performance_result, 'q4_performance_result');
        errors := errors || required_error(NEW.q4_business_volume, 'q4_business_volume');
        errors := errors || integer_or_na_nd_error(NEW.q4_business_volume, 'q4_business_volume');
        IF errors = '{{}}' THEN
          RETURN NEW;
        END IF;
        RAISE EXCEPTION E'TAB-DELIMITED\t%', array_to_string(errors, E'\t');
      END;
  - update_record_modified_created_trigger

  trigger_strings:  # yaml | not supported
    service_std_target_error: "Please enter a decimal value between zero and one: %"


excel_edge_style:
  PatternFill:
    patternType: solid
    fgColor: FF002C54
excel_header_style:
  PatternFill:
    patternType: solid
    fgColor: FFEFBD09
excel_column_heading_style:
  PatternFill:
    patternType: solid
    fgColor: FFEFBD09
