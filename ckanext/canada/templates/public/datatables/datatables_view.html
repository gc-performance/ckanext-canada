{% ckan_extends %}
{% import 'macros/canada_read.html' as cr %}

{%- block title -%}
  {# Lets force our title formatting here... #}
  {{- h.resource_view_meta_title(package=package, resource=resource, view=resource_view) | safe -}}
{%- endblock -%}

{% block page %}
  {{ super() }}
  <div id="dtprv_processing" class="dataTables_processing card">
    <div>
      <div></div><div></div><div></div><div></div>
    </div>
  </div>
{% endblock %}

{%- block datatable_column_label -%}
  {%- set label = 'label_' + h.lang() -%}
  {%- set description = 'notes_' + h.lang() -%}
  {%- if data_dictionary_labels and field.info is defined and field.info[label]|length -%}
    {{ field.info[label] | trim }}
  {%- else -%}
    {{ field.id|replace(" ", nbspval) }}
  {%- endif -%}
  &nbsp;
  {%- if data_dictionary_labels and field.info is defined and field.info[description]|length -%}
    <i class="fa fa-info-circle" title="{{ h.markdown_extract(field.info[description], 300) }}"></i>
  {%- endif -%}
  &nbsp;
{%- endblock -%}

{% block adobe_analytics_creator %}
  {{ h.adobe_analytics_creator(organization=package.organization, package=package) | safe }}
{% endblock %}

{% block scripts %}
  {% block adobe_analytics_footer %}
    <script type="text/javascript">if( typeof _satellite !== "undefined" ){ _satellite.pageBottom(); }</script>
  {% endblock %}
  {% block google_analytics_footer %}{% endblock %}
  {{ super() }}
  {% asset 'canada_datatables/js' %}
{% endblock %}

{% block styles %}
  {{ super() }}
  {% asset 'canada_datatables/css' %}
{% endblock %}
